var __extends,Common;(function(n){var t=function(){function n(){this.lastId=1;this.prefix="ID_";this.callbacks=[];this.isPending=[];this.isHandled=[];this.pendingPayload=null;this._isDispatching=!1}return n.prototype.register=function(n){var t=this.prefix+this.lastId++;return this.callbacks[t]=n,t},n.prototype.unregister=function(n){delete this.callbacks[n]},n.prototype.waitFor=function(n){for(var i,t=0;t<n.length;t++)(i=n[t],this.isPending[i])||this.invokeCallback(i)},n.prototype.dispatch=function(n){this.startDispatching(n);try{for(var t in this.callbacks)this.isPending[t]||this.invokeCallback(t)}finally{this.stopDispatching()}},n.prototype.isDispatching=function(){return this._isDispatching},n.prototype.invokeCallback=function(n){this.isPending[n]=!0;this.callbacks[n](this.pendingPayload);this.isHandled[n]=!0},n.prototype.startDispatching=function(n){for(var t in this.callbacks)this.isPending[t]=!1,this.isHandled[t]=!1;this.pendingPayload=n;this._isDispatching=!0},n.prototype.stopDispatching=function(){this.pendingPayload=null;this._isDispatching=!1},n}();n.Dispatcher=t})(Common||(Common={})),function(n){var t=function(){function n(n){this.dispatcher=n;this.message="";this.init()}return n.prototype.init=function(){var n=this;this.dispatcher.register(function(t){t.actionType=="sending"&&(n.message=t.data)})},n}();n.Inbox=t}(Common||(Common={})),function(n){var t=function(){function n(n,t){this.$log=n;this.dispatcher=t}return n.prototype.init=function(){var n=this,t=this.dispatcher.register(function(t){n.$log.info("payload: "+JSON.stringify(t))});this.$log.info("id: "+t)},n}();n.Logger=t}(Common||(Common={})),function(n){var t=function(){function n(n,t){this.actionType=n;this.data=t}return n}();n.Payload=t}(Common||(Common={}));__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t=function(){function n(){}return n}(),i;n.Base=t;i=function(t){function i(n){t.call(this);this.dispatcher=n;this.title="Hi man!";this.data=null}return __extends(i,t),i.prototype.writing=function(){this.dispatcher.dispatch(new n.Payload("writing",this.data))},i.prototype.send=function(){this.dispatcher.dispatch(new n.Payload("sending",this.data))},i}(t);n.TextArea=i}(Common||(Common={}));
//# sourceMappingURL=common.min.js.map
